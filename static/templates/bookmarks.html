<!-- Bookmarks View Template -->
<div ng-controller="BookmarksController">
    <!-- Bookmarks-specific header -->
    <div ng-show="currentView === 'bookmarks'" class="mb-3">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h5 class="mb-0">
                    <i class="fas fa-bookmark me-2"></i>Development Bookmarks
                </h5>
                <p class="text-muted mb-0">Jenkins jobs, repositories, and development resources</p>
            </div>
        </div>
        <div class="mt-2">
            <small class="text-muted">
                <i class="fas fa-search me-1"></i>Use fuzzy search to find links even with typos
            </small>
        </div>
    </div>

    <!-- Search Bar -->
    <div class="row mb-4">
        <div class="col-md-8 mx-auto">
            <div class="input-group">
                <span class="input-group-text">
                    <i class="fas fa-search"></i>
                </span>
                <input type="text" 
                       class="form-control form-control-lg" 
                       placeholder="Search bookmarks... (supports typos and partial matches)"
                       ng-model="searchQuery"
                       ng-change="searchBookmarks()"
                       ng-keyup="searchBookmarks()">
                <button class="btn btn-outline-secondary" 
                        type="button" 
                        ng-click="clearSearch()"
                        ng-show="searchQuery">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <small class="form-text text-muted" ng-show="searchQuery">
                <i class="fas fa-info-circle me-1"></i>
                Showing {{ filteredBookmarks.length }} of {{ bookmarks.length }} bookmarks
                <span ng-show="searchQuery.length > 0"> for "{{ searchQuery }}"</span>
            </small>
        </div>
    </div>

    <!-- Debug Information -->
    <div class="alert alert-info">
        <strong>Bookmarks Debug Info:</strong><br>
        Loading: {{ bookmarksLoading }}<br>
        Bookmarks count: {{ bookmarks.length }}<br>
        Filtered count: {{ filteredBookmarks.length }}<br>
        Search query: "{{ searchQuery }}"<br>
        Current view: {{ currentView }}
    </div>

    <!-- Loading State for Bookmarks -->
    <div ng-if="bookmarksLoading" class="text-center">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading bookmarks...</span>
        </div>
        <p class="mt-2">Loading bookmarks...</p>
    </div>

    <!-- No Results -->
    <div ng-if="!bookmarksLoading && filteredBookmarks.length === 0 && searchQuery" class="text-center">
        <div class="alert alert-info">
            <i class="fas fa-search me-2"></i>
            No bookmarks found for "{{ searchQuery }}". Try different keywords or check for typos.
        </div>
    </div>
    
    <!-- No Bookmarks at All -->
    <div ng-if="!bookmarksLoading && bookmarks.length === 0 && !searchQuery" class="text-center">
        <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle me-2"></i>
            No bookmarks available. Check if the data file is loaded properly.
            <br><small>Debug: bookmarks.length = {{ bookmarks.length }}, filteredBookmarks.length = {{ filteredBookmarks.length }}</small>
        </div>
    </div>

    <!-- Bookmarks Grid -->
    <div class="row">
        <div ng-repeat="bookmark in filteredBookmarks" class="col-lg-6 col-xl-4 mb-4">
            <div class="card h-100 bookmark-card">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-bookmark me-2"></i>
                        {{ bookmark.name }}
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">{{ bookmark.description }}</p>
                    
                    <!-- Main URL -->
                    <div class="mb-3">
                        <label class="fw-bold">
                            <i class="fas fa-link me-1"></i>Main URL:
                        </label>
                        <div>
                            <a ng-href="{{ bookmark.main_url }}" 
                               target="_blank" 
                               class="btn btn-outline-primary btn-sm">
                                {{ bookmark.main_url }}
                                <i class="fas fa-external-link-alt ms-1"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Git Link -->
                    <div class="mb-3" ng-if="bookmark.git_link">
                        <label class="fw-bold">
                            <i class="fab fa-git-alt me-1"></i>Git Repository:
                        </label>
                        <div>
                            <a ng-href="{{ bookmark.git_link }}" 
                               target="_blank" 
                               class="btn btn-outline-success btn-sm">
                                {{ bookmark.git_link }}
                                <i class="fab fa-github ms-1"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Sub URLs -->
                    <div ng-if="bookmark.sub_urls && bookmark.sub_urls.length > 0">
                        <label class="fw-bold">
                            <i class="fas fa-sitemap me-1"></i>Related Links:
                        </label>
                        <ul class="list-unstyled mt-2">
                            <li ng-repeat="subUrl in bookmark.sub_urls" class="mb-2">
                                <a ng-href="{{ subUrl.url }}" 
                                   target="_blank" 
                                   class="btn btn-outline-secondary btn-sm w-100 text-start">
                                    <i class="fas fa-arrow-right me-2"></i>
                                    {{ subUrl.name }}
                                    <i class="fas fa-external-link-alt ms-1 float-end"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>